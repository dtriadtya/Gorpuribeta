(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{5531:function(e,t,o){"use strict";o.d(t,{Z:function(){return createLucideIcon}});var r=o(2265);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,o)=>o?o.toUpperCase():t.toLowerCase()),toPascalCase=e=>{let t=toCamelCase(e);return t.charAt(0).toUpperCase()+t.slice(1)},mergeClasses=(...e)=>e.filter((e,t,o)=>!!e&&""!==e.trim()&&o.indexOf(e)===t).join(" ").trim(),hasA11yProp=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:s="",children:l,iconNode:i,...c},d)=>(0,r.createElement)("svg",{ref:d,...n,width:t,height:t,stroke:e,strokeWidth:a?24*Number(o)/Number(t):o,className:mergeClasses("lucide",s),...!l&&!hasA11yProp(c)&&{"aria-hidden":"true"},...c},[...i.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(l)?l:[l]])),createLucideIcon=(e,t)=>{let o=(0,r.forwardRef)(({className:o,...n},s)=>(0,r.createElement)(a,{ref:s,iconNode:t,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(e))}`,`lucide-${e}`,o),...n}));return o.displayName=toPascalCase(e),o}},8004:function(e,t,o){"use strict";o.d(t,{Z:function(){return n}});var r=o(5531);let n=(0,r.Z)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]])},2549:function(e,t,o){"use strict";o.d(t,{Z:function(){return n}});var r=o(5531);let n=(0,r.Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6179:function(e,t,o){Promise.resolve().then(o.bind(o,3827)),Promise.resolve().then(o.bind(o,2979)),Promise.resolve().then(o.t.bind(o,1371,23)),Promise.resolve().then(o.t.bind(o,2853,23))},3827:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return Header}});var r=o(7437),n=o(2265),a=o(1396),s=o.n(a),l=o(4033),i=o(6820),c=o.n(i),d=o(2549),u=o(8004);function Header(){let[e,t]=(0,n.useState)(!1),[o,a]=(0,n.useState)(null),i=(0,n.useRef)(null),g=(0,l.usePathname)();(0,l.useRouter)(),(0,n.useEffect)(()=>{let checkUserData=()=>{console.log("\uD83D\uDD0D Header: Checking user data...");let e=localStorage.getItem("user"),t=localStorage.getItem("token");if(console.log("\uD83D\uDCE6 Header: User data:",e?"exists":"null"),console.log("\uD83D\uDD11 Header: Token:",t?"exists":"null"),e&&t)try{let t=JSON.parse(e);console.log("✅ Header: Setting user:",t.nama_user,"-",t.role),a(t)}catch(e){console.error("❌ Header: Error parsing user data:",e),a(null)}else console.log("\uD83D\uDEAB Header: No user data, setting null"),a(null)};return checkUserData(),window.addEventListener("storage",checkUserData),window.addEventListener("userLogin",checkUserData),window.addEventListener("userLogout",checkUserData),()=>{window.removeEventListener("storage",checkUserData),window.removeEventListener("userLogin",checkUserData),window.removeEventListener("userLogout",checkUserData)}},[]),(0,n.useEffect)(()=>{let handleClickOutside=e=>{i.current&&!i.current.contains(e.target)&&t(!1)};return e&&document.addEventListener("mousedown",handleClickOutside),()=>document.removeEventListener("mousedown",handleClickOutside)},[e]);let handleLogout=async()=>{try{let e=localStorage.getItem("token");if(e){console.log("\uD83D\uDD13 Calling logout API...");let t=await fetch("/api/auth/logout",{method:"POST",headers:{Authorization:"Bearer ".concat(e)}}),o=await t.json();console.log("\uD83D\uDCE1 Logout API response:",t.status,o)}localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("unpaidReservations"),a(null),t(!1),window.dispatchEvent(new Event("userLogout")),await c().fire({icon:"success",title:"Berhasil Keluar",text:"Anda telah berhasil keluar dari akun.",showConfirmButton:!1,timer:1500}),window.location.href="/"}catch(e){console.error("Error during logout:",e),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("unpaidReservations"),a(null),window.dispatchEvent(new Event("userLogout")),window.location.href="/"}};return(0,r.jsx)("header",{ref:i,className:"bg-white shadow-sm border-b border-gray-200 relative",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,r.jsx)("div",{className:"flex items-center z-10",children:(0,r.jsxs)(s(),{href:"/",className:"flex items-center space-x-2",onClick:()=>t(!1),children:[(0,r.jsx)("img",{src:"/images/logo gor puri beta.png",alt:"Logo GOR Puri Beta",className:"w-8 h-8 rounded-lg object-cover"}),(0,r.jsx)("span",{className:"text-xl font-bold text-gray-900",children:"GOR Puri Beta"})]})}),(0,r.jsx)("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:(0,r.jsx)(()=>(0,r.jsxs)("div",{className:"hidden md:flex items-center space-x-8",children:[(0,r.jsx)(s(),{href:"/",className:"px-3 py-2 rounded-lg transition-colors ".concat("/"===g?"bg-blue-50 text-blue-600 font-medium":"text-gray-700 hover:text-blue-600 hover:bg-blue-50"),children:"Beranda"}),(0,r.jsx)(s(),{href:"/fields",className:"px-3 py-2 rounded-lg transition-colors ".concat("/fields"===g?"bg-blue-50 text-blue-600 font-medium":"text-gray-700 hover:text-blue-600 hover:bg-blue-50"),children:"Lapangan"}),(0,r.jsx)(s(),{href:"/information",className:"px-3 py-2 rounded-lg transition-colors ".concat("/information"===g?"bg-blue-50 text-blue-600 font-medium":"text-gray-700 hover:text-blue-600 hover:bg-blue-50"),children:"Informasi"})]}),{})}),(0,r.jsx)("div",{className:"hidden md:flex items-center space-x-4 z-10",children:o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s(),{href:"/dashboard",className:"px-3 py-2 rounded-lg transition-colors ".concat("/dashboard"===g?"bg-blue-50 text-blue-600 font-medium":"text-gray-700 hover:text-blue-600 hover:bg-blue-50"),children:"Akun Saya"}),(0,r.jsx)("button",{onClick:handleLogout,className:"btn-secondary",children:"Keluar"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s(),{href:"/login",className:"text-gray-700 hover:text-primary-600",children:"Masuk"}),(0,r.jsx)(s(),{href:"/register",className:"btn-primary",children:"Daftar"})]})}),(0,r.jsx)("div",{className:"md:hidden",children:(0,r.jsx)("button",{onClick:()=>t(!e),className:"text-gray-700 hover:text-primary-600 focus:outline-none",children:e?(0,r.jsx)(d.Z,{className:"h-6 w-6"}):(0,r.jsx)(u.Z,{className:"h-6 w-6"})})})]}),e&&(0,r.jsxs)("div",{className:"md:hidden px-2 pt-2 pb-3 space-y-1 bg-white border-t",children:[(0,r.jsx)(s(),{href:"/",className:"block px-3 py-2 rounded-md ".concat("/"===g?"bg-blue-50 text-blue-600 font-medium":"text-gray-700 hover:bg-gray-50"),onClick:()=>t(!1),children:"Beranda"}),(0,r.jsx)(s(),{href:"/fields",className:"block px-3 py-2 rounded-md ".concat("/fields"===g?"bg-blue-50 text-blue-600 font-medium":"text-gray-700 hover:bg-gray-50"),onClick:()=>t(!1),children:"Lapangan"}),(0,r.jsx)(s(),{href:"/information",className:"block px-3 py-2 rounded-md ".concat("/information"===g?"bg-blue-50 text-blue-600 font-medium":"text-gray-700 hover:bg-gray-50"),onClick:()=>t(!1),children:"Informasi"}),(0,r.jsx)("div",{className:"border-t pt-3 mt-3",children:o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s(),{href:"/dashboard",className:"block px-3 py-2 text-gray-700 hover:bg-gray-50 rounded-md",onClick:()=>t(!1),children:"Akun Saya"}),(0,r.jsx)("button",{onClick:handleLogout,className:"block w-full text-left px-3 py-2 text-gray-700 hover:bg-gray-50 rounded-md",children:"Keluar"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s(),{href:"/login",className:"block px-3 py-2 text-gray-700 hover:bg-gray-50 rounded-md",onClick:()=>t(!1),children:"Masuk"}),(0,r.jsx)(s(),{href:"/register",className:"block px-3 py-2 text-gray-700 hover:bg-gray-50 rounded-md",onClick:()=>t(!1),children:"Daftar"})]})})]})]})})}},2979:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return SessionCleanup}});var r=o(2265);function SessionCleanup(){return(0,r.useEffect)(()=>{console.log("SessionCleanup: Component mounted");let e=sessionStorage.getItem("sessionActive"),t=localStorage.getItem("token");e?console.log("SessionCleanup: Detected REFRESH"):t&&console.log("SessionCleanup: New tab with existing token"),sessionStorage.setItem("sessionActive","true");let handleBeforeUnload=e=>{let t="true"===sessionStorage.getItem("justLoggedIn");if(t){console.log("SessionCleanup: Internal navigation detected, keeping session"),sessionStorage.removeItem("justLoggedIn");return}let o=localStorage.getItem("token");if(!o){console.log("SessionCleanup: No token found");return}console.log("SessionCleanup: Tab closing - logging out");let r="".concat(window.location.origin,"/api/auth/logout");try{let e=new Blob([JSON.stringify({token:o})],{type:"application/json"});navigator.sendBeacon(r,e),console.log("SessionCleanup: Logout beacon sent")}catch(e){console.error("SessionCleanup: Beacon error:",e)}localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("unpaidReservations"),console.log("SessionCleanup: localStorage cleared")};return window.addEventListener("beforeunload",handleBeforeUnload),()=>{console.log("SessionCleanup: Component unmounting"),window.removeEventListener("beforeunload",handleBeforeUnload)}},[]),null}},2853:function(){},1371:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3"}},4033:function(e,t,o){e.exports=o(94)}},function(e){e.O(0,[461,176,971,472,744],function(){return e(e.s=6179)}),_N_E=e.O()}]);