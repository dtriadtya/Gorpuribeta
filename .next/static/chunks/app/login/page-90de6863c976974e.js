(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{5531:function(e,t,a){"use strict";a.d(t,{Z:function(){return createLucideIcon}});var r=a(2265);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),toPascalCase=e=>{let t=toCamelCase(e);return t.charAt(0).toUpperCase()+t.slice(1)},mergeClasses=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim(),hasA11yProp=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:n="",children:l,iconNode:i,...c},d)=>(0,r.createElement)("svg",{ref:d,...s,width:t,height:t,stroke:e,strokeWidth:o?24*Number(a)/Number(t):a,className:mergeClasses("lucide",n),...!l&&!hasA11yProp(c)&&{"aria-hidden":"true"},...c},[...i.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(l)?l:[l]])),createLucideIcon=(e,t)=>{let a=(0,r.forwardRef)(({className:a,...s},n)=>(0,r.createElement)(o,{ref:n,iconNode:t,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(e))}`,`lucide-${e}`,a),...s}));return a.displayName=toPascalCase(e),a}},7216:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(5531);let s=(0,r.Z)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},9670:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(5531);let s=(0,r.Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},5589:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(5531);let s=(0,r.Z)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},1295:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(5531);let s=(0,r.Z)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},7581:function(e,t,a){Promise.resolve().then(a.bind(a,8123))},8123:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return LoginPage}});var r=a(7437),s=a(2265),o=a(1396),n=a.n(o),l=a(4033),i=a(1295),c=a(5589),d=a(7216),u=a(9670),m=a(6820),h=a.n(m);function LoginPage(){let[e,t]=(0,s.useState)({email:"",password:""}),[a,o]=(0,s.useState)(!1),[m,g]=(0,s.useState)(!1),[f,p]=(0,s.useState)(!0),[x,b]=(0,s.useState)(""),[y,w]=(0,s.useState)(0);(0,l.useRouter)();let getRedirectPath=()=>{{let e=new URLSearchParams(window.location.search);return e.get("redirect")}},v=["/images/badminton.jpg","/images/basket.jpg","/images/futsal.jpg"];(0,s.useEffect)(()=>{let e=setInterval(()=>{w(e=>(e+1)%v.length)},4e3);return()=>clearInterval(e)},[]),(0,s.useEffect)(()=>{let checkAuth=async()=>{try{let e=localStorage.getItem("token"),t=localStorage.getItem("user");if(e&&t){let e=JSON.parse(t),a="ADMIN"===e.role?"/admin":"/";window.location.href=a;return}}catch(e){console.error("Error checking auth:",e),localStorage.removeItem("token"),localStorage.removeItem("user")}p(!1)};checkAuth()},[]);let handleSubmit=async t=>{t.preventDefault(),g(!0),b("");try{let t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();if(t.ok){let e;localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("unpaidReservations"),await new Promise(e=>setTimeout(e,50));try{localStorage.setItem("token",a.token),localStorage.setItem("user",JSON.stringify(a.user));let e=localStorage.getItem("token"),t=localStorage.getItem("user");if(!e||!t)throw Error("Failed to store authentication data")}catch(e){console.error("localStorage error:",e),g(!1),await h().fire({icon:"error",title:"Error Penyimpanan",text:"Gagal menyimpan data login. Pastikan browser Anda mengizinkan cookies dan localStorage.",confirmButtonColor:"#2563eb"});return}"ADMIN"!==a.user.role&&fetch("/api/reservations",{headers:{Authorization:"Bearer ".concat(a.token)}}).then(e=>e.json()).then(e=>{let t=e.reservations.filter(e=>{let t="PAID"!==e.payment_status,a="CANCELLED"!==e.status&&"REJECTED"!==e.status;return t&&a});t.length>0&&localStorage.setItem("unpaidReservations",JSON.stringify(t))}).catch(e=>console.error("Error checking unpaid reservations:",e)),window.dispatchEvent(new Event("userLogin"));let t=getRedirectPath();e=t||("ADMIN"===a.user.role?"/admin":"/"),sessionStorage.setItem("justLoggedIn","true"),await h().fire({icon:"success",title:"Login Berhasil!",text:"Selamat datang, ".concat(a.user.name,"!"),confirmButtonColor:"#2563eb",timer:1e3,showConfirmButton:!1}),await new Promise(e=>setTimeout(e,100)),console.log("\uD83D\uDE80 Redirecting to:",e),window.location.href=e}else g(!1),h().fire({icon:"error",title:"Login Gagal",text:a.error||"Email atau password salah",confirmButtonColor:"#2563eb"})}catch(e){g(!1),h().fire({icon:"error",title:"Error Jaringan",text:"Terjadi kesalahan jaringan. Silakan coba lagi.",confirmButtonColor:"#2563eb"})}},handleChange=a=>{t({...e,[a.target.name]:a.target.value})};return f?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Memuat..."})]})}):(0,r.jsxs)("div",{className:"min-h-screen flex",children:[(0,r.jsx)("div",{className:"flex-1 flex flex-col justify-center px-4 sm:px-6 lg:px-20 xl:px-24",children:(0,r.jsxs)("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[(0,r.jsx)("div",{className:"flex items-center justify-center mb-6",children:(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Login Sekarang!"})}),(0,r.jsxs)("form",{className:"space-y-6",onSubmit:handleSubmit,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)(i.Z,{className:"h-5 w-5 text-gray-400"})}),(0,r.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e.email,onChange:handleChange,className:"appearance-none block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 sm:text-sm",placeholder:"Masukkan email Anda"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)(c.Z,{className:"h-5 w-5 text-gray-400"})}),(0,r.jsx)("input",{id:"password",name:"password",type:a?"text":"password",autoComplete:"current-password",required:!0,value:e.password,onChange:handleChange,className:"appearance-none block w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 sm:text-sm",placeholder:"Masukkan password Anda"}),(0,r.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>o(!a),children:a?(0,r.jsx)(d.Z,{className:"h-5 w-5 text-gray-400"}):(0,r.jsx)(u.Z,{className:"h-5 w-5 text-gray-400"})})]})]}),x&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg text-sm",children:x}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",disabled:m,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?"Memproses...":"Login"})}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Belum punya akun?"," ",(0,r.jsx)(n(),{href:"/register",className:"font-medium text-blue-600 hover:text-blue-500 underline",children:"Daftar disini"})]})})]})]})}),(0,r.jsxs)("div",{className:"hidden lg:block lg:flex-1 relative overflow-hidden",children:[v.map((e,t)=>(0,r.jsxs)("div",{className:"absolute inset-0 transition-opacity duration-1000 ".concat(t===y?"opacity-100":"opacity-0"),children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('".concat(e,"')")}}),(0,r.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-30"})]},t)),(0,r.jsx)("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 flex space-x-2 z-10",children:v.map((e,t)=>(0,r.jsx)("button",{onClick:()=>w(t),className:"w-2 h-2 rounded-full transition-all ".concat(t===y?"bg-white w-8":"bg-white bg-opacity-50 hover:bg-opacity-75"),"aria-label":"Go to slide ".concat(t+1)},t))})]})]})}},4033:function(e,t,a){e.exports=a(94)}},function(e){e.O(0,[461,176,971,472,744],function(){return e(e.s=7581)}),_N_E=e.O()}]);