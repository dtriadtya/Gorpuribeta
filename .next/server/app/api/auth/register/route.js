"use strict";(()=>{var e={};e.id=3002,e.ids=[3002],e.modules={53524:e=>{e.exports=require("@prisma/client")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},12781:e=>{e.exports=require("stream")},73837:e=>{e.exports=require("util")},70281:(e,r,a)=>{a.r(r),a.d(r,{headerHooks:()=>g,originalPathname:()=>v,requestAsyncStorage:()=>_,routeModule:()=>m,serverHooks:()=>h,staticGenerationAsyncStorage:()=>c,staticGenerationBailout:()=>k});var t={};a.r(t),a.d(t,{POST:()=>POST});var s=a(10884),i=a(16132),u=a(95798),o=a(62421),n=a.n(o),l=a(96721),p=a.n(l),d=a(15204);async function POST(e){try{let r=await e.json(),{name:a,email:t,password:s,phone:i}=r;if(!a||!t||!s)return u.Z.json({error:"Nama, email, dan password wajib diisi"},{status:400});if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))return u.Z.json({error:"Format email tidak valid"},{status:400});if(s.length<6)return u.Z.json({error:"Password minimal 6 karakter"},{status:400});let o=await d._.user.findUnique({where:{email_user:t}});if(o)return u.Z.json({error:"Email sudah terdaftar"},{status:409});let l=await n().hash(s,12),m=await d._.user.create({data:{nama_user:a,email_user:t,password:l,phone_user:i||null,role:"USER"}}),_=p().sign({userId:m.id_user,email:m.email_user,role:m.role},process.env.JWT_SECRET||"fallback-secret",{expiresIn:"7d"}),c={id:m.id_user,id_user:m.id_user,name:m.nama_user,nama_user:m.nama_user,email:m.email_user,email_user:m.email_user,phone:m.phone_user,phone_user:m.phone_user,role:m.role,isActive:m.isActive,createdAt:m.user_dibuat_pada.toISOString(),updatedAt:m.user_diupdate_pada.toISOString()},h=u.Z.json({message:"Pendaftaran berhasil",user:c,token:_});return h.cookies.set({name:"token",value:_,httpOnly:!0,secure:!0,sameSite:"strict",path:"/",maxAge:604800}),h}catch(e){return console.error("Error registering user:",e),u.Z.json({error:"Terjadi kesalahan pada server"},{status:500})}}let m=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/auth/register/route",pathname:"/api/auth/register",filename:"route",bundlePath:"app/api/auth/register/route"},resolvedPagePath:"C:\\Projects\\backup 07-11-2025 4.11\\gorpuribeta-main\\app\\api\\auth\\register\\route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:_,staticGenerationAsyncStorage:c,serverHooks:h,headerHooks:g,staticGenerationBailout:k}=m,v="/api/auth/register/route"},15204:(e,r,a)=>{a.d(r,{_:()=>s});var t=a(53524);let s=global.prisma||new t.PrismaClient({log:["error"]})}};var r=require("../../../../webpack-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),a=r.X(0,[2006,8107,6721,2421],()=>__webpack_exec__(70281));module.exports=a})();