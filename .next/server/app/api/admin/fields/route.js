"use strict";(()=>{var e={};e.id=9789,e.ids=[9789],e.modules={53524:e=>{e.exports=require("@prisma/client")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},12781:e=>{e.exports=require("stream")},73837:e=>{e.exports=require("util")},9003:(e,a,r)=>{r.r(a),r.d(a,{headerHooks:()=>_,originalPathname:()=>m,requestAsyncStorage:()=>p,routeModule:()=>l,serverHooks:()=>c,staticGenerationAsyncStorage:()=>u,staticGenerationBailout:()=>g});var i={};r.r(i),r.d(i,{GET:()=>GET,POST:()=>POST});var t=r(10884),n=r(16132),s=r(95798),d=r(15204),o=r(8192);async function GET(e){try{let a=(0,o.Ym)(e);if(!a)return s.Z.json({error:"Unauthorized"},{status:401});if("ADMIN"!==a.role)return s.Z.json({error:"Forbidden - Admin access required"},{status:403});let{searchParams:r}=new URL(e.url),i=parseInt(r.get("page")||"1"),t=parseInt(r.get("limit")||"10"),n=r.get("search")||"",l=r.get("status")||"ALL",p={};n&&(p.OR=[{nama_lapangan:{contains:n,mode:"insensitive"}},{deskripsi:{contains:n,mode:"insensitive"}}]),"ALL"!==l&&(p.isActive="ACTIVE"===l);let[u,c]=await Promise.all([d._.field.findMany({where:p,select:{id_lapangan:!0,nama_lapangan:!0,deskripsi:!0,harga_per_jam:!0,imageUrl:!0,fasilitas:!0,isActive:!0,lapangan_dibuat_pada:!0,lapangan_diupdate_pada:!0,_count:{select:{reservasi:!0}}},orderBy:{lapangan_dibuat_pada:"desc"},skip:(i-1)*t,take:t}),d._.field.count({where:p})]),_=Math.ceil(c/t),g=u.map(e=>({id:e.id_lapangan,name:e.nama_lapangan,description:e.deskripsi,pricePerHour:Number(e.harga_per_jam),imageUrl:e.imageUrl,facilities:e.fasilitas,isActive:e.isActive,createdAt:e.lapangan_dibuat_pada.toISOString(),updatedAt:e.lapangan_diupdate_pada.toISOString(),_count:e._count}));return s.Z.json({fields:g,pagination:{page:i,limit:t,totalCount:c,totalPages:_,hasNext:i<_,hasPrev:i>1}})}catch(e){return console.error("Error fetching fields:",e),s.Z.json({error:"Internal server error"},{status:500})}}async function POST(e){try{let a=(0,o.Ym)(e);if(!a)return s.Z.json({error:"Unauthorized"},{status:401});if("ADMIN"!==a.role)return s.Z.json({error:"Forbidden - Admin access required"},{status:403});let r=await e.json(),{name:i,description:t,pricePerHour:n,imageUrl:l,facilities:p}=r;if(!i||!n)return s.Z.json({error:"Missing required fields"},{status:400});let u=await d._.field.create({data:{nama_lapangan:i,deskripsi:t||null,harga_per_jam:parseFloat(n),imageUrl:l||null,fasilitas:p||[],isActive:!0},select:{id_lapangan:!0,nama_lapangan:!0,deskripsi:!0,harga_per_jam:!0,imageUrl:!0,fasilitas:!0,isActive:!0,lapangan_dibuat_pada:!0,lapangan_diupdate_pada:!0}}),c={id:u.id_lapangan,name:u.nama_lapangan,description:u.deskripsi,pricePerHour:Number(u.harga_per_jam),imageUrl:u.imageUrl,facilities:u.fasilitas,isActive:u.isActive,createdAt:u.lapangan_dibuat_pada.toISOString(),updatedAt:u.lapangan_diupdate_pada.toISOString()};return s.Z.json({message:"Field created successfully",field:c},{status:201})}catch(e){return console.error("Error creating field:",e),s.Z.json({error:"Internal server error"},{status:500})}}let l=new t.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/admin/fields/route",pathname:"/api/admin/fields",filename:"route",bundlePath:"app/api/admin/fields/route"},resolvedPagePath:"C:\\Projects\\backup 07-11-2025 4.11\\gorpuribeta-main\\app\\api\\admin\\fields\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:p,staticGenerationAsyncStorage:u,serverHooks:c,headerHooks:_,staticGenerationBailout:g}=l,m="/api/admin/fields/route"}};var a=require("../../../../webpack-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),r=a.X(0,[2006,8107,6721,390],()=>__webpack_exec__(9003));module.exports=r})();