"use strict";(()=>{var e={};e.id=2309,e.ids=[2309],e.modules={53524:e=>{e.exports=require("@prisma/client")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},12781:e=>{e.exports=require("stream")},73837:e=>{e.exports=require("util")},42463:(e,r,a)=>{a.r(r),a.d(r,{headerHooks:()=>_,originalPathname:()=>g,requestAsyncStorage:()=>l,routeModule:()=>u,serverHooks:()=>c,staticGenerationAsyncStorage:()=>p,staticGenerationBailout:()=>f});var i={};a.r(i),a.d(i,{DELETE:()=>DELETE,GET:()=>GET,PUT:()=>PUT});var t=a(10884),n=a(16132),s=a(95798),d=a(15204),o=a(8192);async function GET(e,{params:r}){try{let a=(0,o.Ym)(e);if(!a)return s.Z.json({error:"Unauthorized"},{status:401});if("ADMIN"!==a.role)return s.Z.json({error:"Forbidden - Admin access required"},{status:403});let{id:i}=r,t=await d._.field.findUnique({where:{id_lapangan:parseInt(i)},select:{id_lapangan:!0,nama_lapangan:!0,deskripsi:!0,harga_per_jam:!0,imageUrl:!0,fasilitas:!0,isActive:!0,lapangan_dibuat_pada:!0,lapangan_diupdate_pada:!0,_count:{select:{reservasi:!0}}}});if(!t)return s.Z.json({error:"Field not found"},{status:404});let n={id:t.id_lapangan,name:t.nama_lapangan,description:t.deskripsi,pricePerHour:Number(t.harga_per_jam),imageUrl:t.imageUrl,facilities:t.fasilitas,isActive:t.isActive,createdAt:t.lapangan_dibuat_pada.toISOString(),updatedAt:t.lapangan_diupdate_pada.toISOString(),_count:t._count};return s.Z.json({field:n})}catch(e){return console.error("Error fetching field:",e),s.Z.json({error:"Internal server error"},{status:500})}}async function PUT(e,{params:r}){try{let a=(0,o.Ym)(e);if(!a)return s.Z.json({error:"Unauthorized"},{status:401});if("ADMIN"!==a.role)return s.Z.json({error:"Forbidden - Admin access required"},{status:403});let{id:i}=r,t=await e.json(),{name:n,description:u,pricePerHour:l,imageUrl:p,facilities:c,isActive:_}=t;if(!n||!l)return s.Z.json({error:"Missing required fields"},{status:400});let f=await d._.field.findUnique({where:{id_lapangan:parseInt(i)}});if(!f)return s.Z.json({error:"Field not found"},{status:404});let g=await d._.field.update({where:{id_lapangan:parseInt(i)},data:{nama_lapangan:n,deskripsi:u||null,harga_per_jam:parseFloat(l),imageUrl:p||null,fasilitas:c||[],isActive:void 0!==_?_:f.isActive},select:{id_lapangan:!0,nama_lapangan:!0,deskripsi:!0,harga_per_jam:!0,imageUrl:!0,fasilitas:!0,isActive:!0,lapangan_dibuat_pada:!0,lapangan_diupdate_pada:!0}}),m={id:g.id_lapangan,name:g.nama_lapangan,description:g.deskripsi,pricePerHour:Number(g.harga_per_jam),imageUrl:g.imageUrl,facilities:g.fasilitas,isActive:g.isActive,createdAt:g.lapangan_dibuat_pada.toISOString(),updatedAt:g.lapangan_diupdate_pada.toISOString()};return s.Z.json({message:"Field updated successfully",field:m})}catch(e){return console.error("Error updating field:",e),s.Z.json({error:"Internal server error"},{status:500})}}async function DELETE(e,{params:r}){try{let a=(0,o.Ym)(e);if(!a)return s.Z.json({error:"Unauthorized"},{status:401});if("ADMIN"!==a.role)return s.Z.json({error:"Forbidden - Admin access required"},{status:403});let{id:i}=r,t=await d._.field.findUnique({where:{id_lapangan:parseInt(i)},include:{_count:{select:{reservasi:!0}}}});if(!t)return s.Z.json({error:"Field not found"},{status:404});if(t._count.reservasi>0)return s.Z.json({error:"Cannot delete field with existing reservations"},{status:400});return await d._.field.delete({where:{id_lapangan:parseInt(i)}}),s.Z.json({message:"Field deleted successfully"})}catch(e){return console.error("Error deleting field:",e),s.Z.json({error:"Internal server error"},{status:500})}}let u=new t.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/admin/fields/[id]/route",pathname:"/api/admin/fields/[id]",filename:"route",bundlePath:"app/api/admin/fields/[id]/route"},resolvedPagePath:"C:\\Projects\\backup 07-11-2025 4.11\\gorpuribeta-main\\app\\api\\admin\\fields\\[id]\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:l,staticGenerationAsyncStorage:p,serverHooks:c,headerHooks:_,staticGenerationBailout:f}=u,g="/api/admin/fields/[id]/route"}};var r=require("../../../../../webpack-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),a=r.X(0,[2006,8107,6721,390],()=>__webpack_exec__(42463));module.exports=a})();