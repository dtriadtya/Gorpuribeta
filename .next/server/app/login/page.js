(()=>{var e={};e.id=2626,e.ids=[2626],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},41307:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>g,tree:()=>c});var r=a(67096),s=a(16132),o=a(37284),n=a.n(o),l=a(32564),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);a.d(t,i);let c=["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,45004)),"C:\\Projects\\backup 07-11-2025 4.11\\gorpuribeta-main\\app\\login\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,29925)),"C:\\Projects\\backup 07-11-2025 4.11\\gorpuribeta-main\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9291,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Projects\\backup 07-11-2025 4.11\\gorpuribeta-main\\app\\login\\page.tsx"],u="/login/page",m={require:a,loadChunk:()=>Promise.resolve()},g=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},45047:(e,t,a)=>{Promise.resolve().then(a.bind(a,39402))},39402:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>LoginPage});var r=a(30784),s=a(9885),o=a(11440),n=a.n(o),l=a(57114),i=a(59490),c=a(23294),d=a(43250),u=a(28626),m=a(19300);function LoginPage(){let[e,t]=(0,s.useState)({email:"",password:""}),[a,o]=(0,s.useState)(!1),[g,p]=(0,s.useState)(!1),[x,h]=(0,s.useState)(!0),[b,f]=(0,s.useState)(""),[v,y]=(0,s.useState)(0);(0,l.useRouter)();let getRedirectPath=()=>null,j=["/images/badminton.jpg","/images/basket.jpg","/images/futsal.jpg"];(0,s.useEffect)(()=>{let e=setInterval(()=>{y(e=>(e+1)%j.length)},4e3);return()=>clearInterval(e)},[]),(0,s.useEffect)(()=>{let checkAuth=async()=>{try{let e=localStorage.getItem("token"),t=localStorage.getItem("user");if(e&&t){let e=JSON.parse(t),a="ADMIN"===e.role?"/admin":"/";window.location.href=a;return}}catch(e){console.error("Error checking auth:",e),localStorage.removeItem("token"),localStorage.removeItem("user")}h(!1)};checkAuth()},[]);let handleSubmit=async t=>{t.preventDefault(),p(!0),f("");try{let t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();if(t.ok){let e;localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("unpaidReservations"),await new Promise(e=>setTimeout(e,50));try{localStorage.setItem("token",a.token),localStorage.setItem("user",JSON.stringify(a.user));let e=localStorage.getItem("token"),t=localStorage.getItem("user");if(!e||!t)throw Error("Failed to store authentication data")}catch(e){console.error("localStorage error:",e),p(!1),await m.Z.fire({icon:"error",title:"Error Penyimpanan",text:"Gagal menyimpan data login. Pastikan browser Anda mengizinkan cookies dan localStorage.",confirmButtonColor:"#2563eb"});return}"ADMIN"!==a.user.role&&fetch("/api/reservations",{headers:{Authorization:`Bearer ${a.token}`}}).then(e=>e.json()).then(e=>{let t=e.reservations.filter(e=>{let t="PAID"!==e.payment_status,a="CANCELLED"!==e.status&&"REJECTED"!==e.status;return t&&a});t.length>0&&localStorage.setItem("unpaidReservations",JSON.stringify(t))}).catch(e=>console.error("Error checking unpaid reservations:",e)),window.dispatchEvent(new Event("userLogin"));let t=getRedirectPath();e=t||("ADMIN"===a.user.role?"/admin":"/"),sessionStorage.setItem("justLoggedIn","true"),await m.Z.fire({icon:"success",title:"Login Berhasil!",text:`Selamat datang, ${a.user.name}!`,confirmButtonColor:"#2563eb",timer:1e3,showConfirmButton:!1}),await new Promise(e=>setTimeout(e,100)),console.log("\uD83D\uDE80 Redirecting to:",e),window.location.href=e}else p(!1),m.Z.fire({icon:"error",title:"Login Gagal",text:a.error||"Email atau password salah",confirmButtonColor:"#2563eb"})}catch(e){p(!1),m.Z.fire({icon:"error",title:"Error Jaringan",text:"Terjadi kesalahan jaringan. Silakan coba lagi.",confirmButtonColor:"#2563eb"})}},handleChange=a=>{t({...e,[a.target.name]:a.target.value})};return x?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Memuat..."})]})}):(0,r.jsxs)("div",{className:"min-h-screen flex",children:[r.jsx("div",{className:"flex-1 flex flex-col justify-center px-4 sm:px-6 lg:px-20 xl:px-24",children:(0,r.jsxs)("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[r.jsx("div",{className:"flex items-center justify-center mb-6",children:r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Login Sekarang!"})}),(0,r.jsxs)("form",{className:"space-y-6",onSubmit:handleSubmit,children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(i.Z,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e.email,onChange:handleChange,className:"appearance-none block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 sm:text-sm",placeholder:"Masukkan email Anda"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(c.Z,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"password",name:"password",type:a?"text":"password",autoComplete:"current-password",required:!0,value:e.password,onChange:handleChange,className:"appearance-none block w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500 sm:text-sm",placeholder:"Masukkan password Anda"}),r.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>o(!a),children:a?r.jsx(d.Z,{className:"h-5 w-5 text-gray-400"}):r.jsx(u.Z,{className:"h-5 w-5 text-gray-400"})})]})]}),b&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg text-sm",children:b}),r.jsx("div",{children:r.jsx("button",{type:"submit",disabled:g,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?"Memproses...":"Login"})}),r.jsx("div",{className:"text-center",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Belum punya akun?"," ",r.jsx(n(),{href:"/register",className:"font-medium text-blue-600 hover:text-blue-500 underline",children:"Daftar disini"})]})})]})]})}),(0,r.jsxs)("div",{className:"hidden lg:block lg:flex-1 relative overflow-hidden",children:[j.map((e,t)=>(0,r.jsxs)("div",{className:`absolute inset-0 transition-opacity duration-1000 ${t===v?"opacity-100":"opacity-0"}`,children:[r.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url('${e}')`}}),r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-30"})]},t)),r.jsx("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 flex space-x-2 z-10",children:j.map((e,t)=>r.jsx("button",{onClick:()=>y(t),className:`w-2 h-2 rounded-full transition-all ${t===v?"bg-white w-8":"bg-white bg-opacity-50 hover:bg-opacity-75"}`,"aria-label":`Go to slide ${t+1}`},t))})]})]})}},45004:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>n,__esModule:()=>o,default:()=>i});var r=a(95153);let s=(0,r.createProxy)(String.raw`C:\Projects\backup 07-11-2025 4.11\gorpuribeta-main\app\login\page.tsx`),{__esModule:o,$$typeof:n}=s,l=s.default,i=l}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[2006,2246,2500,5388,6897],()=>__webpack_exec__(41307));module.exports=a})();