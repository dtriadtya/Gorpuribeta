"use strict";exports.id=8724,exports.ids=[8724],exports.modules={15204:(e,r,i)=>{i.d(r,{_:()=>a});var s=i(53524);let a=global.prisma||new s.PrismaClient({log:["error"]})},58724:(e,r,i)=>{i.d(r,{j:()=>validateSession});var s=i(96721),a=i.n(s),o=i(15204);async function validateSession(e){try{let r=a().verify(e,process.env.JWT_SECRET||"fallback-secret"),i=await o._.user.findUnique({where:{id_user:r.userId},select:{id_user:!0,nama_user:!0,email_user:!0,phone_user:!0,role:!0,isActive:!0}});if(!i)return console.log(`❌ User tidak ditemukan dengan userId: ${r.userId}`),{valid:!1,reason:"User tidak ditemukan"};if(!i.isActive)return console.log(`❌ User ${i.email_user} tidak aktif`),{valid:!1,reason:"Akun tidak aktif"};return console.log(`✅ Session valid untuk user ${i.email_user}`),{valid:!0,user:i}}catch(e){if(e instanceof a().TokenExpiredError)return console.log(`⏰ Token expired`),{valid:!1,reason:"Token expired"};if(e instanceof a().JsonWebTokenError)return console.log(`❌ Token tidak valid: ${e.message}`),{valid:!1,reason:"Token tidak valid"};return console.error(`❌ Error validasi token:`,e),{valid:!1,reason:"Error validasi token"}}}}};