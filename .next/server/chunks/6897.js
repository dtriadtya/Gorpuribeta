exports.id=6897,exports.ids=[6897],exports.modules={34206:(e,t,o)=>{Promise.resolve().then(o.bind(o,78282)),Promise.resolve().then(o.bind(o,75361))},90624:(e,t,o)=>{Promise.resolve().then(o.t.bind(o,13724,23)),Promise.resolve().then(o.t.bind(o,35365,23)),Promise.resolve().then(o.t.bind(o,44900,23)),Promise.resolve().then(o.t.bind(o,44714,23)),Promise.resolve().then(o.t.bind(o,45392,23)),Promise.resolve().then(o.t.bind(o,8898,23))},78282:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>Header});var r=o(30784),a=o(9885),n=o(11440),s=o.n(n),l=o(57114),i=o(19300),d=o(56206),c=o(7382);function Header(){let[e,t]=(0,a.useState)(!1),[o,n]=(0,a.useState)(null),u=(0,a.useRef)(null),g=(0,l.usePathname)();(0,l.useRouter)(),(0,a.useEffect)(()=>{let checkUserData=()=>{console.log("\uD83D\uDD0D Header: Checking user data...");let e=localStorage.getItem("user"),t=localStorage.getItem("token");if(console.log("\uD83D\uDCE6 Header: User data:",e?"exists":"null"),console.log("\uD83D\uDD11 Header: Token:",t?"exists":"null"),e&&t)try{let t=JSON.parse(e);console.log("✅ Header: Setting user:",t.nama_user,"-",t.role),n(t)}catch(e){console.error("❌ Header: Error parsing user data:",e),n(null)}else console.log("\uD83D\uDEAB Header: No user data, setting null"),n(null)};return checkUserData(),window.addEventListener("storage",checkUserData),window.addEventListener("userLogin",checkUserData),window.addEventListener("userLogout",checkUserData),()=>{window.removeEventListener("storage",checkUserData),window.removeEventListener("userLogin",checkUserData),window.removeEventListener("userLogout",checkUserData)}},[]),(0,a.useEffect)(()=>{let handleClickOutside=e=>{u.current&&!u.current.contains(e.target)&&t(!1)};return e&&document.addEventListener("mousedown",handleClickOutside),()=>document.removeEventListener("mousedown",handleClickOutside)},[e]);let handleLogout=async()=>{try{let e=localStorage.getItem("token");if(e){console.log("\uD83D\uDD13 Calling logout API...");let t=await fetch("/api/auth/logout",{method:"POST",headers:{Authorization:`Bearer ${e}`}}),o=await t.json();console.log("\uD83D\uDCE1 Logout API response:",t.status,o)}localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("unpaidReservations"),n(null),t(!1),window.dispatchEvent(new Event("userLogout")),await i.Z.fire({icon:"success",title:"Berhasil Keluar",text:"Anda telah berhasil keluar dari akun.",showConfirmButton:!1,timer:1500}),window.location.href="/"}catch(e){console.error("Error during logout:",e),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("unpaidReservations"),n(null),window.dispatchEvent(new Event("userLogout")),window.location.href="/"}};return r.jsx("header",{ref:u,className:"bg-white shadow-sm border-b border-gray-200 relative",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[r.jsx("div",{className:"flex items-center z-10",children:(0,r.jsxs)(s(),{href:"/",className:"flex items-center space-x-2",onClick:()=>t(!1),children:[r.jsx("img",{src:"/images/logo gor puri beta.png",alt:"Logo GOR Puri Beta",className:"w-8 h-8 rounded-lg object-cover"}),r.jsx("span",{className:"text-xl font-bold text-gray-900",children:"GOR Puri Beta"})]})}),r.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:r.jsx(()=>(0,r.jsxs)("div",{className:"hidden md:flex items-center space-x-8",children:[r.jsx(s(),{href:"/",className:`px-3 py-2 rounded-lg transition-colors ${"/"===g?"bg-blue-50 text-blue-600 font-medium":"text-gray-700 hover:text-blue-600 hover:bg-blue-50"}`,children:"Beranda"}),r.jsx(s(),{href:"/fields",className:`px-3 py-2 rounded-lg transition-colors ${"/fields"===g?"bg-blue-50 text-blue-600 font-medium":"text-gray-700 hover:text-blue-600 hover:bg-blue-50"}`,children:"Lapangan"}),r.jsx(s(),{href:"/information",className:`px-3 py-2 rounded-lg transition-colors ${"/information"===g?"bg-blue-50 text-blue-600 font-medium":"text-gray-700 hover:text-blue-600 hover:bg-blue-50"}`,children:"Informasi"})]}),{})}),r.jsx("div",{className:"hidden md:flex items-center space-x-4 z-10",children:o?(0,r.jsxs)(r.Fragment,{children:[r.jsx(s(),{href:"/dashboard",className:`px-3 py-2 rounded-lg transition-colors ${"/dashboard"===g?"bg-blue-50 text-blue-600 font-medium":"text-gray-700 hover:text-blue-600 hover:bg-blue-50"}`,children:"Akun Saya"}),r.jsx("button",{onClick:handleLogout,className:"btn-secondary",children:"Keluar"})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(s(),{href:"/login",className:"text-gray-700 hover:text-primary-600",children:"Masuk"}),r.jsx(s(),{href:"/register",className:"btn-primary",children:"Daftar"})]})}),r.jsx("div",{className:"md:hidden",children:r.jsx("button",{onClick:()=>t(!e),className:"text-gray-700 hover:text-primary-600 focus:outline-none",children:e?r.jsx(d.Z,{className:"h-6 w-6"}):r.jsx(c.Z,{className:"h-6 w-6"})})})]}),e&&(0,r.jsxs)("div",{className:"md:hidden px-2 pt-2 pb-3 space-y-1 bg-white border-t",children:[r.jsx(s(),{href:"/",className:`block px-3 py-2 rounded-md ${"/"===g?"bg-blue-50 text-blue-600 font-medium":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>t(!1),children:"Beranda"}),r.jsx(s(),{href:"/fields",className:`block px-3 py-2 rounded-md ${"/fields"===g?"bg-blue-50 text-blue-600 font-medium":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>t(!1),children:"Lapangan"}),r.jsx(s(),{href:"/information",className:`block px-3 py-2 rounded-md ${"/information"===g?"bg-blue-50 text-blue-600 font-medium":"text-gray-700 hover:bg-gray-50"}`,onClick:()=>t(!1),children:"Informasi"}),r.jsx("div",{className:"border-t pt-3 mt-3",children:o?(0,r.jsxs)(r.Fragment,{children:[r.jsx(s(),{href:"/dashboard",className:"block px-3 py-2 text-gray-700 hover:bg-gray-50 rounded-md",onClick:()=>t(!1),children:"Akun Saya"}),r.jsx("button",{onClick:handleLogout,className:"block w-full text-left px-3 py-2 text-gray-700 hover:bg-gray-50 rounded-md",children:"Keluar"})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(s(),{href:"/login",className:"block px-3 py-2 text-gray-700 hover:bg-gray-50 rounded-md",onClick:()=>t(!1),children:"Masuk"}),r.jsx(s(),{href:"/register",className:"block px-3 py-2 text-gray-700 hover:bg-gray-50 rounded-md",onClick:()=>t(!1),children:"Daftar"})]})})]})]})})}},75361:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>SessionCleanup});var r=o(9885);function SessionCleanup(){return(0,r.useEffect)(()=>{console.log("SessionCleanup: Component mounted");let e=sessionStorage.getItem("sessionActive"),t=localStorage.getItem("token");e?console.log("SessionCleanup: Detected REFRESH"):t&&console.log("SessionCleanup: New tab with existing token"),sessionStorage.setItem("sessionActive","true");let handleBeforeUnload=e=>{let t="true"===sessionStorage.getItem("justLoggedIn");if(t){console.log("SessionCleanup: Internal navigation detected, keeping session"),sessionStorage.removeItem("justLoggedIn");return}let o=localStorage.getItem("token");if(!o){console.log("SessionCleanup: No token found");return}console.log("SessionCleanup: Tab closing - logging out");let r=`${window.location.origin}/api/auth/logout`;try{let e=new Blob([JSON.stringify({token:o})],{type:"application/json"});navigator.sendBeacon(r,e),console.log("SessionCleanup: Logout beacon sent")}catch(e){console.error("SessionCleanup: Beacon error:",e)}localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("unpaidReservations"),console.log("SessionCleanup: localStorage cleared")};return window.addEventListener("beforeunload",handleBeforeUnload),()=>{console.log("SessionCleanup: Component unmounting"),window.removeEventListener("beforeunload",handleBeforeUnload)}},[]),null}},29925:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>RootLayout,metadata:()=>p});var r=o(4656),a=o(2999),n=o.n(a);o(67272);var s=o(95153);let l=(0,s.createProxy)(String.raw`C:\Projects\backup 07-11-2025 4.11\gorpuribeta-main\components\Header.tsx`),{__esModule:i,$$typeof:d}=l,c=l.default,u=(0,s.createProxy)(String.raw`C:\Projects\backup 07-11-2025 4.11\gorpuribeta-main\components\SessionCleanup.tsx`),{__esModule:g,$$typeof:m}=u,h=u.default;var x=o(24596);let p={title:"Reservasi Lapangan Olahraga",description:"Platform reservasi lapangan olahraga terbaik di Ciledug",icons:{icon:"/images/logo gor puri beta.png",shortcut:"/images/logo gor puri beta.png",apple:"/images/logo gor puri beta.png"}};function RootLayout({children:e}){let t=(0,x.headers)(),o=t.get("x-pathname")||"",a=o.startsWith("/admin");return r.jsx("html",{lang:"id",children:(0,r.jsxs)("body",{className:n().className,children:[r.jsx(h,{}),"/login"===o||"/register"===o?r.jsx("div",{className:"min-h-screen",children:e}):a?r.jsx("div",{className:"min-h-screen",children:e}):(0,r.jsxs)("div",{className:"min-h-screen flex flex-col",children:[r.jsx(c,{}),r.jsx("main",{className:"flex-1",children:e})]})]})})}},67272:()=>{}};